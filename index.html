<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<title>GIS ÎùºÏù¥Ìä∏</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />

<!-- Kakao Maps SDK -->
<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=5f253bed8a8966a66fc9076b662663fd&libraries=services&autoload=false"></script>

<link rel="stylesheet" href="https://hamancctv.github.io/2/style.css" />

<style>
html, body {height:100%;margin:0;}
#container {position:relative;height:100%;overflow:hidden;}
#mapWrapper {position:relative;width:100%;height:100%;z-index:1;}
#map {width:100%;height:100%;}

/* ===== Ìà¥Î∞î ===== */
.toolbar {
  position: fixed; top: 60px; left: 10px;
  display: flex; flex-direction: column; gap: 8px;
  z-index: 10;
}
.toolbar button {
  width: 42px; height: 42px;
  display: flex; align-items: center; justify-content: center;
  font-size: 22px; line-height: 1;
  border: 1px solid #ccc; border-radius: 8px;
  background: #fff; color: #444;
  cursor: pointer;
  transition: all 0.2s ease; box-sizing: border-box;
}
.toolbar button:hover { box-shadow: 0 3px 12px rgba(0,0,0,0.12); }
.toolbar button.active {
  border-color: #007aff; color: #007aff;
  box-shadow: 0 0 0 2px rgba(0,122,255,0.15) inset;
}

/* ===== Î°úÎìúÎ∑∞ ===== */
#rvWrapper {position:absolute;inset:0;display:none;z-index:0;}
#roadview {width:100%;height:100%;}
.view_roadview #rvWrapper {display:block;z-index:1;}
.view_roadview #mapWrapper {
  position:absolute;left:8px;bottom:8px;
  width:26%;height:26%;
  min-width:200px;min-height:150px;
  border:2px solid #ccc;border-radius:8px;background:#fff;z-index:2;
  box-shadow:0 8px 24px rgba(0,0,0,.2);
}
#mapWrapper .rv-resizer {
  position:absolute; right:6px; top:6px;
  width:16px; height:16px;
  border:1px solid #bbb; border-radius:4px; background:#fff;
  box-shadow:0 1px 3px rgba(0,0,0,.2);
  cursor:nesw-resize; display:none;
}
.view_roadview #mapWrapper .rv-resizer {display:block;}
.view_roadview #mapWrapper .MapWalker {pointer-events:auto !important;}
.view_roadview #mapWrapper [class*="overlay"],
.view_roadview #mapWrapper [class*="marker"] {pointer-events:none !important;}

/* ===== MapWalker ===== */
.MapWalker {position:absolute; margin:-26px 0 0 -51px; cursor:grab; z-index:2147483647;}
.MapWalker.dragging{ cursor:grabbing; }
.MapWalker.pick { outline:2px solid rgba(255,215,0,.7); border-radius:6px; }
.MapWalker .figure {
  position:absolute;width:25px;left:38px;top:-2px;height:39px;
  background:url(https://t1.daumcdn.net/localimg/localimages/07/2018/pc/roadview_minimap_wk_2018.png) -298px -114px no-repeat;
  pointer-events:none;
}
.MapWalker .angleBase,
.MapWalker .angleFront{
  position:absolute;left:0;top:0;width:102px;height:52px;
  background-image:url(https://t1.daumcdn.net/localimg/localimages/07/2018/pc/roadview_minimap_wk_2018.png);
  background-repeat:no-repeat;
  filter:sepia(1)saturate(5.5)hue-rotate(8deg)brightness(1.12)contrast(0.98);
}
.MapWalker .angleBase{background-position:-834px -2px;opacity:.18;}
.MapWalker .angleFront{opacity:.92;}
</style>
</head>
<body>
<div id="container">
  <div id="mapWrapper">
    <div id="map"></div>
    <div class="toolbar">
      <button id="btnSatellite" title="ÏúÑÏÑ±Î∑∞">üåê</button>
      <button id="roadviewControl" title="Î°úÎìúÎ∑∞">üöó</button>
      <button id="btnDistance" title="Í±∞Î¶¨Ïû¨Í∏∞">üìè</button>
      <button id="btnGroupMST" title="Í∑∏Î£πÏó∞Í≤∞">üß©</button>
    </div>
    <div class="rv-resizer"></div>
  </div>
  <div id="rvWrapper"><div id="roadview"></div></div>
</div>

<!-- ==== Ïô∏Î∂Ä Ïä§ÌÅ¨Î¶ΩÌä∏ ==== -->
<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
<script src="https://hamancctv.github.io/2/sel_suggest.js"></script>
<script src="https://hamancctv.github.io/2/markers-handler.js"></script>
<script src="https://hamancctv.github.io/2/search-suggest.js"></script>
<script src="https://hamancctv.github.io/2/drawGroupLinesMST.js"></script>

<!-- ==== Ï†ÑÏó≠ Ïù∏ÌÑ∞ÎûôÏÖò ÎùΩ ==== -->
<script>
window.__interactionLock = false;
window.isInteractionLocked = () => window.__interactionLock === true;
window.setInteractionLock = (s) => {
  window.__interactionLock = !!s;
  console.log(`[interactionLock] ${s ? "LOCKED" : "UNLOCKED"}`);
};
</script>

<!-- ==== Î≥∏Ï≤¥ ==== -->
<script src="https://hamancctv.github.io/2/map-core.js"></script>

<!-- ==== Í±∞Î¶¨Ïû¨Í∏∞ ÏôÑÏÑ±Ìòï ==== -->
<script src="https://hamancctv.github.io/2/btnDistance.js"></script>

<!-- ==== Í±∞Î¶¨Ïû¨Í∏∞ Ìè¨Ïù∏ÌÑ∞ ÎùΩ + Ïª§ÏÑú Î≥µÍµ¨ ==== -->
<script>
(function hookDistanceLock(){
  const btn = document.getElementById('btnDistance');
  if (!btn) return;
  const obs = new MutationObserver(() => {
    const active = btn.classList.contains('active');
    if (active){
      setInteractionLock(true);
      applyOverlayPointerLock(true);
      map.setCursor("crosshair");
    } else {
      setInteractionLock(false);
      applyOverlayPointerLock(false);
      map.setCursor("grab");
    }
  });
  obs.observe(btn, { attributes:true, attributeFilter:['class'] });
})();
</script>
</body>
</html>
